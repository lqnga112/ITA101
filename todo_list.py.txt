import os

# ==========================
#  TO-DO LIST APPLICATION
#  Ng∆∞·ªùi h·ªçc + AI c√πng x√¢y d·ª±ng
# ==========================

DATA_FILE = "tasks.txt"


# --------------------------
# Load tasks from file
# --------------------------
def load_tasks():
    tasks = []
    if os.path.exists(DATA_FILE):
        with open(DATA_FILE, "r", encoding="utf-8") as f:
            tasks = [line.strip() for line in f.readlines()]
    return tasks


# --------------------------
# Save tasks to file
# --------------------------
def save_tasks(tasks):
    with open(DATA_FILE, "w", encoding="utf-8") as f:
        for task in tasks:
            f.write(task + "\n")


# --------------------------
# Display tasks
# --------------------------
def show_tasks(tasks):
    if not tasks:
        print("\nüì≠ Danh s√°ch c√¥ng vi·ªác ƒëang tr·ªëng.\n")
        return

    print("\nüìå DANH S√ÅCH C√îNG VI·ªÜC:")
    for i, task in enumerate(tasks, start=1):
        print(f"{i}. {task}")
    print()


# --------------------------
# Add new task
# --------------------------
def add_task(tasks):
    new_task = input("\nNh·∫≠p c√¥ng vi·ªác m·ªõi: ").strip()
    if new_task:
        tasks.append(new_task)
        save_tasks(tasks)
        print("‚úÖ ƒê√£ th√™m c√¥ng vi·ªác!\n")
    else:
        print("‚ö†Ô∏è C√¥ng vi·ªác kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng.\n")


# --------------------------
# Delete a task
# --------------------------
def delete_task(tasks):
    show_tasks(tasks)
    if not tasks:
        return

    try:
        index = int(input("Nh·∫≠p s·ªë th·ª© t·ª± c√¥ng vi·ªác c·∫ßn xo√°: "))
        if 1 <= index <= len(tasks):
            removed = tasks.pop(index - 1)
            save_tasks(tasks)
            print(f"üóëÔ∏è ƒê√£ xo√°: {removed}\n")
        else:
            print("‚ö†Ô∏è S·ªë th·ª© t·ª± kh√¥ng h·ª£p l·ªá.\n")
    except ValueError:
        print("‚ö†Ô∏è Vui l√≤ng nh·∫≠p s·ªë.\n")


# --------------------------
# Main menu
# --------------------------
def main():
    tasks = load_tasks()

    while True:
        print("========== TO-DO LIST ==========")
        print("1. Xem danh s√°ch c√¥ng vi·ªác")
        print("2. Th√™m c√¥ng vi·ªác")
        print("3. Xo√° c√¥ng vi·ªác")
        print("4. Tho√°t ch∆∞∆°ng tr√¨nh")
        print("================================")

        choice = input("Ch·ªçn ch·ª©c nƒÉng (1-4): ")

        if choice == "1":
            show_tasks(tasks)
        elif choice == "2":
            add_task(tasks)
        elif choice == "3":
            delete_task(tasks)
        elif choice == "4":
            print("\nüëã T·∫°m bi·ªát! Ch√∫c b·∫°n m·ªôt ng√†y nƒÉng su·∫•t!\n")
            break
        else:
            print("‚ö†Ô∏è L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá, vui l√≤ng th·ª≠ l·∫°i.\n")


if __name__ == "__main__":
    main()
